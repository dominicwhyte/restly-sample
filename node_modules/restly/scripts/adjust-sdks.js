const fs = require('fs');
const readline = require('readline');

// const indexFile = 'src/index.ts';

// async function processLineByLine() {
//   const fileStream = fs.createReadStream(indexFile);

//   const rl = readline.createInterface({
//     input: fileStream,
//     crlfDelay: Infinity,
//   });
//   let newIndexFile = '';

//   const services = [];
//   for await (const line of rl) {
//     // imports a service
//     if (line.includes('from \'./services')) {
//       const re = /\{ (.*) \}/;
//       const service = line.match(re)[1];
//       services.push(service);
//       newIndexFile += `import { ${service} as _${service} } from './services/${service}';\n`;
//       newIndexFile += `const ${service} = (serviceId: string) => _${service}\n`;
//       newIndexFile += '\n';
//     } else {
//       newIndexFile += `${line}\n`;
//     }
//     // Add default export of the libraries
//   }
//   newIndexFile += `export default { ${services.join(', ')} }`;

//   fs.writeFileSync(indexFile, newIndexFile);
// }

// processLineByLine();


